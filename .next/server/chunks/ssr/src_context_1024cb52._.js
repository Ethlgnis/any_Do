module.exports=[56025,36408,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d="service_ryxggsl",e=()=>new Promise((a,b)=>{if(window.emailjs)return void a(window.emailjs);let c=document.createElement("script");c.src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js",c.onload=()=>{window.emailjs.init("7EA5pgn595Ku0EKJ-"),a(window.emailjs)},c.onerror=b,document.head.appendChild(c)});async function f(a){if(a?.email)try{let b=await e();await b.send(d,"template_wyw6slw",{to_email:a.email,user_name:a.name||"User",login_time:new Date().toLocaleString(),device_info:navigator.userAgent.split("(")[1]?.split(")")[0]||"Unknown Device"}),console.log("Login notification email sent successfully")}catch(a){console.error("Failed to send login notification:",a)}}async function g(a){if(a?.email)try{let b=await e();await b.send(d,"template_faoxn1n",{to_email:a.email,user_name:a.name||"User",delete_time:new Date().toLocaleString()}),console.log("Account deletion notification email sent successfully")}catch(a){console.error("Failed to send deletion notification:",a)}}a.s(["sendAccountDeletedNotification",()=>g,"sendLoginNotification",()=>f],36408);let h=(0,c.createContext)(null);function i({children:a}){let[d,e]=(0,c.useState)(null),[g,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=()=>{if(window.google?.accounts){m(window.google.accounts.oauth2.initTokenClient({client_id:"654874405185-6koeq1ij3q1onptd6rj2s6rctot99nid.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.readonly https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email",callback:n}));let a=localStorage.getItem("anydo_user"),b=localStorage.getItem("anydo_token");a&&b&&(e(JSON.parse(a)),i(b)),k(!1)}else setTimeout(a,100)};a()},[]);let n=async a=>{if(a.access_token){i(a.access_token),localStorage.setItem("anydo_token",a.access_token);try{let b=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${a.access_token}`}}),c=await b.json(),d={id:c.id,name:c.name,email:c.email,picture:c.picture};e(d),localStorage.setItem("anydo_user",JSON.stringify(d)),f(d)}catch(a){console.error("Error fetching user profile:",a)}}},o=(0,c.useCallback)(()=>{l&&l.requestAccessToken()},[l]),p=(0,c.useCallback)(()=>{g&&window.google?.accounts&&window.google.accounts.oauth2.revoke(g),e(null),i(null),localStorage.removeItem("anydo_user"),localStorage.removeItem("anydo_token"),localStorage.removeItem("anydo_files"),localStorage.removeItem("anydo_links"),localStorage.removeItem("anydo_todos"),localStorage.removeItem("anydo_chats")},[g]);return(0,b.jsx)(h.Provider,{value:{user:d,accessToken:g,isLoading:j,isAuthenticated:!!d,login:o,logout:p},children:a})}function j(){let a=(0,c.useContext)(h);if(!a)throw Error("useAuth must be used within an AuthProvider");return a}a.s(["AuthProvider",()=>i,"default",0,h,"useAuth",()=>j],56025)},44394,79744,83674,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025);let e="anydo_files",f="anydo_links",g="anydo_todos",h="anydo_chats",i="files",j=null,k=()=>new Promise((a,b)=>{if(j)return void a(j);let c=indexedDB.open("AnyDoDB",1);c.onerror=()=>b(c.error),c.onsuccess=()=>{a(j=c.result)},c.onupgradeneeded=a=>{let b=a.target.result;b.objectStoreNames.contains(i)||b.createObjectStore(i,{keyPath:"id"})}}),l=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),m=async a=>{let b=await k();return new Promise((c,d)=>{let f=new FileReader;f.onload=async()=>{let g={id:l(),name:a.name,type:a.type,size:a.size,data:f.result,addedAt:new Date().toISOString()},h=b.transaction([i],"readwrite");h.objectStore(i).add(g),h.oncomplete=()=>{let a=n();a.push({id:g.id,name:g.name,type:g.type,size:g.size,addedAt:g.addedAt,driveFileId:null}),localStorage.setItem(e,JSON.stringify(a)),c(g)},h.onerror=()=>d(h.error)},f.onerror=()=>d(f.error),f.readAsDataURL(a)})},n=()=>{let a=localStorage.getItem(e);return a?JSON.parse(a):[]},o=(a,b)=>{let c=n().map(c=>c.id===a?{...c,...b}:c);localStorage.setItem(e,JSON.stringify(c))},p=a=>n().find(b=>b.id===a),q=async a=>{let b=await k();return new Promise((c,d)=>{let e=b.transaction([i],"readonly").objectStore(i).get(a);e.onsuccess=()=>c(e.result),e.onerror=()=>d(e.error)})},r=async a=>{let b=await k();return new Promise((c,d)=>{let f=b.transaction([i],"readwrite");f.objectStore(i).delete(a),f.oncomplete=()=>{let b=n().filter(b=>b.id!==a);localStorage.setItem(e,JSON.stringify(b)),c()},f.onerror=()=>d(f.error)})},s=a=>{let b=t(),c={id:l(),url:a.url,title:a.title||"",description:a.description||"",category:a.category||"General",addedAt:new Date().toISOString()};return b.push(c),localStorage.setItem(f,JSON.stringify(b)),c},t=()=>{let a=localStorage.getItem(f);return a?JSON.parse(a):[]},u=a=>{let b=t().filter(b=>b.id!==a);localStorage.setItem(f,JSON.stringify(b))},v=a=>{let b=w(),c={id:l(),title:a.title,description:a.description||"",priority:a.priority||"medium",dueDate:a.dueDate||null,completed:!1,addedAt:new Date().toISOString(),completedAt:null};return b.push(c),localStorage.setItem(g,JSON.stringify(b)),c},w=()=>{let a=localStorage.getItem(g);return a?JSON.parse(a):[]},x=(a,b)=>{let c=w().map(c=>{if(c.id===a){let a={...c,...b};return b.completed&&!c.completed&&(a.completedAt=new Date().toISOString()),a}return c});localStorage.setItem(g,JSON.stringify(c))},y=a=>{let b=w().filter(b=>b.id!==a);localStorage.setItem(g,JSON.stringify(b))},z=a=>{let b=A(),c={id:l(),name:a.name||"Imported Chat",content:a.content,messageCount:(a.content.match(/\n/g)||[]).length+1,addedAt:new Date().toISOString()};return b.push(c),localStorage.setItem(h,JSON.stringify(b)),c},A=()=>{let a=localStorage.getItem(h);return a?JSON.parse(a):[]},B=a=>{let b=A().filter(b=>b.id!==a);localStorage.setItem(h,JSON.stringify(b))};a.s(["deleteChat",0,B,"deleteFile",0,r,"deleteLink",0,u,"deleteTodo",0,y,"formatDate",0,a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),"formatFileSize",0,a=>{if(0===a)return"0 Bytes";let b=Math.floor(Math.log(a)/Math.log(1024));return parseFloat((a/Math.pow(1024,b)).toFixed(2))+" "+["Bytes","KB","MB","GB"][b]},"getChats",0,A,"getFileById",0,q,"getFileIcon",0,a=>a?a.startsWith("image/")?"image":"application/pdf"===a?"pdf":a.includes("document")||a.includes("word")?"doc":a.includes("spreadsheet")||a.includes("excel")?"spreadsheet":a.includes("presentation")||a.includes("powerpoint")?"presentation":a.startsWith("video/")?"video":a.startsWith("audio/")?"audio":a.includes("zip")||a.includes("rar")||a.includes("7z")?"archive":a.includes("text")||a.includes("json")||a.includes("javascript")?"code":"file":"file","getFileMetadataById",0,p,"getFilesMetadata",0,n,"getLinks",0,t,"getRelativeTime",0,a=>{let b=new Date,c=new Date(a),d=b.getTime()-c.getTime(),e=Math.floor(d/6e4),f=Math.floor(d/36e5),g=Math.floor(d/864e5);return e<1?"Just now":e<60?`${e}m ago`:f<24?`${f}h ago`:g<7?`${g}d ago`:new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"})},"getTodos",0,w,"saveChat",0,z,"saveFile",0,m,"saveLink",0,s,"saveTodo",0,v,"updateFileMetadata",0,o,"updateTodo",0,x],79744);let C="AnyDo Storage",D="anydo_data.json",E=null;async function F(a){if(E)return E;let b=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${C}' and mimeType='application/vnd.google-apps.folder' and trashed=false`,{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();if(c.files&&c.files.length>0)return E=c.files[0].id;let d=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({name:C,mimeType:"application/vnd.google-apps.folder"})});return E=(await d.json()).id}async function G(a,b,c){let d=await F(a),e={name:`${c}_${b.name}`,parents:[d]},f=new FormData;f.append("metadata",new Blob([JSON.stringify(e)],{type:"application/json"})),f.append("file",b);let g=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${a}`},body:f});return await g.json()}async function H(a,b){await fetch(`https://www.googleapis.com/drive/v3/files/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})}async function I(a,b){let c=await F(a),d=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${D}' and '${c}' in parents and trashed=false`,{headers:{Authorization:`Bearer ${a}`}}),e=await d.json(),f=new Blob([JSON.stringify(b,null,2)],{type:"application/json"});if(e.files&&e.files.length>0){let b=e.files[0].id;await fetch(`https://www.googleapis.com/upload/drive/v3/files/${b}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:f})}else{let b=new FormData;b.append("metadata",new Blob([JSON.stringify({name:D,parents:[c]})],{type:"application/json"})),b.append("file",f),await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${a}`},body:b})}}async function J(a){let b=await F(a),c=await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${D}' and '${b}' in parents and trashed=false`,{headers:{Authorization:`Bearer ${a}`}}),d=await c.json();if(d.files&&d.files.length>0){let b=d.files[0].id,c=await fetch(`https://www.googleapis.com/drive/v3/files/${b}?alt=media`,{headers:{Authorization:`Bearer ${a}`}});return await c.json()}return null}async function K(a){let b=await fetch("https://www.googleapis.com/drive/v3/about?fields=storageQuota",{headers:{Authorization:`Bearer ${a}`}});return await b.json()}a.s(["deleteFileFromDrive",()=>H,"getDriveQuota",()=>K,"loadDataFromDrive",()=>J,"syncDataToDrive",()=>I,"uploadFileToDrive",()=>G],83674);let L=(0,c.createContext)(void 0);a.s(["AppProvider",0,({children:a})=>{let{accessToken:e,isAuthenticated:f,isLoading:g}=(0,d.useAuth)(),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(!1),[l,C]=(0,c.useState)([]),[D,E]=(0,c.useState)([]),[F,K]=(0,c.useState)([]),[M,N]=(0,c.useState)([]);(0,c.useEffect)(()=>{try{C(n()||[]),E(t()||[]),K(w()||[]),N(A()||[])}catch(a){console.error("Initial load error",a)}},[]),(0,c.useEffect)(()=>{f||g||(C([]),E([]),K([]),N([]))},[f,g]);let O=(0,c.useCallback)(async()=>{if(e)try{let a=await J(e);a&&(a.links&&(localStorage.setItem("anydo_links",JSON.stringify(a.links)),E(a.links)),a.todos&&(localStorage.setItem("anydo_todos",JSON.stringify(a.todos)),K(a.todos)),a.chats&&(localStorage.setItem("anydo_chats",JSON.stringify(a.chats)),N(a.chats)))}catch(a){console.error("Error loading from Drive:",a)}},[e]);(0,c.useEffect)(()=>{f&&e&&O()},[f,e,O]),(0,c.useEffect)(()=>{if(!f||!e)return;let a=setTimeout(()=>{I(e,{links:t(),todos:w(),chats:A(),lastSync:new Date().toISOString()}).catch(a=>console.error("Auto-sync error:",a))},2e3);return()=>clearTimeout(a)},[D,F,M,f,e]);let P=async()=>{if(e&&!j){k(!0);try{await I(e,{links:t(),todos:w(),chats:A(),lastSync:new Date().toISOString()}),console.log("Data synced to Drive successfully")}catch(a){console.error("Error syncing to Drive:",a)}finally{k(!1)}}},Q=(0,c.useCallback)(async a=>{try{let b=await m(a);if(C(n()),e)try{let c=await G(e,a,b.id);c?.id&&(o(b.id,{driveFileId:c.id}),C(n()))}catch(a){console.error("Error uploading to Drive:",a)}}catch(a){console.error("Error uploading file:",a)}},[e]),R=(0,c.useCallback)(async a=>{try{let b=p(a);if(await r(a),C(n()),e&&b?.driveFileId)try{await H(e,b.driveFileId),console.log("File deleted from Drive:",b.driveFileId)}catch(a){console.error("Error deleting from Drive:",a)}}catch(a){console.error("Error deleting file:",a)}},[e]),S=(0,c.useCallback)(async a=>{try{let b=await q(a.id);if(b?.data){let a=window.open();if(a)if(b.type.startsWith("image/")||"application/pdf"===b.type)a.document.write(`
              <html>
                <head><title>${b.name}</title></head>
                <body style="margin:0;display:flex;justify-content:center;align-items:center;min-height:100vh;background:#0a0a0f;">
                  ${"application/pdf"===b.type?`<iframe src="${b.data}" style="width:100%;height:100vh;border:none;"></iframe>`:`<img src="${b.data}" style="max-width:100%;max-height:100vh;object-fit:contain;" />`}
                </body>
              </html>
            `);else{let a=document.createElement("a");a.href=b.data,a.download=b.name,a.click()}}}catch(a){console.error("Error viewing file:",a)}},[]),T=(0,c.useCallback)(a=>{s(a),E(t())},[]),U=(0,c.useCallback)(a=>{u(a),E(t())},[]),V=(0,c.useCallback)(a=>{v(a),K(w())},[]),W=(0,c.useCallback)((a,b)=>{x(a,b),K(w())},[]),X=(0,c.useCallback)(a=>{y(a),K(w())},[]),Y=(0,c.useCallback)(a=>{z(a),N(A())},[]),Z=(0,c.useCallback)(a=>{B(a),N(A())},[]);return(0,b.jsx)(L.Provider,{value:{files:l,links:D,todos:F,chats:M,isSyncing:j,searchQuery:h,setSearchQuery:i,handleFileUpload:Q,handleFileDelete:R,handleFileView:S,handleLinkAdd:T,handleLinkDelete:U,handleTodoAdd:V,handleTodoUpdate:W,handleTodoDelete:X,handleChatAdd:Y,handleChatDelete:Z,handleSync:P},children:a})},"useAppContext",0,()=>{let a=(0,c.useContext)(L);if(!a)throw Error("useAppContext must be used within an AppProvider");return a}],44394)}];

//# sourceMappingURL=src_context_1024cb52._.js.map